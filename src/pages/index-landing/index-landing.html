<link rel="import" href="../../../bower_components/polymer/polymer.html">

<dom-module id="index-landing">
    <template>

        <h1>index-landing</h1>

        <h2>Main articles</h2>
        <ul>
            <template is="dom-repeat" items="[[mainArticles]]">
                <li><a href="[[_computeArticleUrl(item.$key)]]">[[item.title]]</a></li>
            </template>
        </ul>
        <h2>Pinned articles</h2>
        <ul>
            <template is="dom-repeat" items="[[pinnedArticles]]">
                <li><a href="[[_computeArticleUrl(item.$key)]]">[[item.title]]</a></li>
            </template>
        </ul>
    </template>
    <script>
        Polymer({
            is: 'index-landing',

            observers: [
                '_handleArticles(articles)'
            ],

            properties: {
                articles: {
                    type: Array
                },
                pinnedArticles: {
                    type: Array,
                    value: []
                },
                mainArticles: {
                    type: Array,
                    value: []
                }
            },

            _computeArticleUrl: function (slug) {
                return '/articles/' + slug;
            },


            _handleArticles: function (articles) {
                this.pinnedArticles = articles.filter(function (article) {
                    return article.pinned == true
                }).slice(0, 1);

                this.mainArticles = articles.filter(function (article) {
                    return article.pinned != true
                }).slice(0, 3);
            }
        })
    </script>
</dom-module>
